---
title: "data_science_load_data"
author: "Alina Levine"
date: "April 2, 2019"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(tidyverse)
library(haven)

```

#Demographics variables

sequence number, hispanic ethnicity, age,Ttotal household income

https://wwwn.cdc.gov/nchs/nhanes/search/variablelist.aspx?Component=Demographics&CycleBeginYear=2015

```{r}
demographics = read_xpt("data/demographics.XPT") %>% janitor::clean_names()

```


#blood pressure and cholesterol
ever told you have high blood pressure, doctor ever told you have high cholesterol

https://wwwn.cdc.gov/Nchs/Nhanes/2015-2016/BPQ_I.htm

```{r}

bp_chol = read_xpt("data/BPQ_I.xpt") %>% janitor::clean_names() %>%
  select(seqn, highbp = bpq020, highchol = bpq080) %>%
  mutate(highbp = ifelse(highbp == 9, NA, highbp),
         highchol = ifelse(! (highchol %in% c(1,2)), NA, highchol))

```


# Body Measure

```{r}

body_measures = read_xpt("data/body_measures.xpt") %>% janitor::clean_names() %>%
  select(seqn, bmxbmn)

```

#smoking
smoked at least 100 cigarettes in life

```{r}

smoking = read_xpt("data/smoking.xpt") %>% janitor::clean_names() %>%
  select(seqn, smoked = smq020) %>%
  mutate(smoked = ifelse(!(smoked %in% c(1,2)), NA, smoked))
  
body_measures = 
  read_xpt("data/body_measures.xpt") %>% 
  select(SEQN, 
         bmi = BMXBMI)

# proportion of missing value
sum(is.na(body_measures$bmi))/length(body_measures$SEQN)
                                    
```



# Diet Behavior and Nutrition

```{r}
lookup.xport("data/diet.xpt")

diet_behavior =
  read_xpt("data/diet.xpt") %>% 
  select(SEQN, 
         fast = DBD900, 
         ready = DBD905, 
         forzen = DBD910) 

# proportion of missing value
sum(is.na(diet_behavior$fast))/length(diet_behavior$SEQN)
sum(is.na(diet_behavior$ready))/length(diet_behavior$SEQN)
sum(is.na(diet_behavior$forzen))/length(diet_behavior$SEQN)
```


# Diabetes

```{r}
lookup.xport("data/diabetes.xpt")

diabetes =
  read_xpt("data/diabetes.xpt") %>% 
  select(SEQN, 
         diabete = DIQ010)

# proportion of missing value
sum(is.na(diabetes$diabete))/length(diabetes$SEQN)
```

# Medical Conditions

```{r}
lookup.xport("data/medical_cond.xpt")

medical_cond =
  read_xpt("data/medical_cond.xpt") %>% 
  select(SEQN, 
         overweight = MCQ080, 
         gout = MCQ160N) 


# proportion of missing value
sum(is.na(medical_cond$overweight))/length(medical_cond$SEQN)
sum(is.na(medical_cond$gout))/length(medical_cond$SEQN)
```


# Response

```{r}
coronary = 
  read_xpt("data/medical_cond.xpt") %>% 
  select(SEQN, 
         disease = MCQ160C) 

# proportion of missing value
sum(is.na(coronary$disease))/length(coronary$SEQN)
```

#alcohol

had at least 12 drinks of alcohol/1 year (ever a moderate drinker), ever had 4/5 drinks every day

```{r}

alcohol = read_xpt("data/alcohol.xpt") %>% janitor::clean_names() %>%
  select(seqn,drinker = alq101, heavy_drinker = alq151 ) %>%
  mutate(heavy_drinker = ifelse(!(heavy_drinker %in% c(1,2)), NA, heavy_drinker),
         drinker = ifelse(!(drinker %in% c(1,2)), NA, drinker))

```


